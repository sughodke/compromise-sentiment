!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).compromiseSentences=t()}(this,(function(){"use strict";function e(t){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function t(e,r){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,r)}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function n(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,s=e(t);if(n){var a=e(this).constructor;o=Reflect.construct(s,arguments,a)}else o=s.apply(this,arguments);return r(this,o)}}var o={NounPhrase:{notA:["VerbPhrase","AdjectivePhrase"],color:"blue"},VerbPhrase:{notA:["AdjectivePhrase","NounPhrase"],color:"green"},AdjectivePhrase:{notA:["VerbPhrase","NounPhrase"],color:"magenta"},Subordinate:{notA:[]}},s=function(e){e.match("#Noun").tag("NounPhrase"),e.match("#Verb").tag("VerbPhrase"),e.match("(this|that|those|these)").tag("NounPhrase"),e.match("#Adjective+ #NounPhrase").tagSafe("NounPhrase"),e.match("#NounPhrase #Adjective+").tagSafe("NounPhrase"),e.match("#Value #NounPhrase").tag("NounPhrase"),e.match("#Determiner #NounPhrase").tag("NounPhrase"),e.match("#Determiner #Adverb+? #Adjective+ #NounPhrase").tag("NounPhrase"),e.match("(many|most|all|one|some|plenty) of #NounPhrase").tag("NounPhrase"),e.match("such a #NounPhrase").tag("NounPhrase"),e.match("#VerbPhrase #Adverb+").tagSafe("VerbPhrase"),e.match("#Adverb+ #VerbPhrase").tagSafe("VerbPhrase"),e.match("#Auxiliary+ #VerbPhrase").tagSafe("VerbPhrase"),e.match("#VerbPhrase no").tagSafe("VerbPhrase"),e.match("not #VerbPhrase").tagSafe("VerbPhrase"),e.match("#VerbPhrase [that]",0).unTag("NounPhrase"),e.match("#VerbPhrase #Conjunction #VerbPhrase").tagSafe("VerbPhrase"),e.match("(who|what|which)").tag("NounPhrase"),e.match("#Adverb+ #Adjective").tagSafe("AdjectivePhrase"),e.match("#Adjective").tagSafe("AdjectivePhrase"),e.match("#Value").tagSafe("NounPhrase"),e.match("#Date").tagSafe("NounPhrase"),e.match("#Date at #Date").tagSafe("NounPhrase")},a={prepend:function(e){return this.forEach((function(t){var r=t.match("^.");r.not("#ProperNoun").toLowerCase(),r._prepend(e),r.terms(0).toTitleCase()})),this},append:function(e){var t=/[.?!]\s*$/.test(e);return this.forEach((function(r){var n=r.match(".$"),o=n.termList(0),s=o.post;!0===t&&(s=""),n._append(e+s),o.post=" "})),this}},i=function(e){var t=e.clone(!0);return 1===t.length||1===(t=t.if("#Verb")).length||1===(t=(t=(t=(t=(t=t.ifNo("(after|although|as|because|before|if|since|than|that|though|when|whenever|where|whereas|wherever|whether|while|why|unless|until|once)")).ifNo("^even (if|though)")).ifNo("^so that")).ifNo("^rather than")).ifNo("^provided that")).length||1===(t=t.ifNo("(that|which|whichever|who|whoever|whom|whose|whomever)")).length||1===(t=t.ifNo("(despite|during|before|through|throughout)")).length?t:(0===t.length&&(t=e),t.eq(0))},c=function(e){var t=e.clauses(),r=i(t),n=r.match("#Determiner? (#Noun|#Adjective)+").if("#Noun"),o=r.verbs().eq(0);return{subject:n.eq(0),verb:o,object:o.lookAhead(".*")}},u={json:function(e){var t=null;"number"==typeof e&&(t=e,e=null),e=e||{text:!0,normal:!0,trim:!0,terms:!0};var r=[];return this.forEach((function(t){var n=t._json(e)[0],o=c(t);n.subject=o.subject.json(e)[0],n.verb=o.verb.json(e)[0],n.object=o.object.json(e)[0],r.push(n)})),null!==t?r[t]:r}},h={toNegative:function(){return this.forEach((function(e){var t=c(e),r=t.verb.clone();r=r.verbs().toNegative(),t.verb.replaceWith(r,!1)})),this},toPositive:function(){return this.forEach((function(e){var t=c(e),r=t.verb.clone();r=r.verbs().toPositive(),t.verb.replaceWith(r,!1)})),this}},f=function(e){var t=e.post(),r=e.clauses();return!0===/\?/.test(t)||!/\.\.$/.test(e.out("text"))&&((!e.has("^#QuestionWord")||!e.has("#Comma"))&&(!!e.has("^#QuestionWord")||(!!e.has("^(do|does|did|is|was|can|could|will|would|may) #Noun")||(!!e.has("^(have|must) you")||(!!r.has("^#QuestionWord")||!!r.has("(do|does|is|was) #Noun+ #Adverb? (#Adjective|#Infinitive)$"))))))},b={isQuestion:function(){return this.filter((function(e){return f(e)}))},isExclamation:function(){return this.filter((function(e){return e.lastTerm().termList(0).hasPost("!")}))},isStatement:function(){return this.filter((function(e){var t=e.lastTerm().termList(0);return!t.hasPost("?")&&!t.hasPost("!")}))},toExclamation:function(){return this.post("!"),this},toQuestion:function(){return this.post("?"),this},toStatement:function(){return this.post("."),this}},l={toPastTense:function(){return this.forEach((function(e){if(!e.has("#PastTense")){var t=c(e),r=t.verb.clone();if(!function(e){return!!e.has("(could|should|would|may|can|must)")}(r)?(r=r.verbs().toPastTense(),t.verb.replaceWith(r,!1)):(r=r.verbs().toParticiple(),t.verb.replaceWith(r,!1)),t.object&&t.object.found&&t.object.has("#PresentTense"))t.object.verbs().if("#PresentTense").verbs().toPastTense()}})),this},toParticiple:function(){return this.forEach((function(e){if(!e.has("has #Participle")){var t=c(e),r=t.verb.clone();if(r=r.verbs().toParticiple(),t.verb.replaceWith(r,!1),t.object&&t.object.found&&t.object.has("#PresentTense"))t.object.verbs().if("#PresentTense").verbs().toParticiple()}})),this},toPresentTense:function(){return this.forEach((function(e){var t=c(e),r=t.verb.lookBehind("(i|we) (#Adverb|#Verb)?$").found,n=t.verb.clone();(n=r?n.has("(is|was|am|be)")?n.replace("will? (is|was|am|be)","am"):n.verbs().toInfinitive():n.verbs().toPresentTense(),t.verb.replaceWith(n,!1),t.object&&t.object.found&&t.object.has("#PastTense"))&&t.object.verbs().if("#PastTense").verbs().toPresentTense()})),this},toFutureTense:function(){return this.forEach((function(e){var t=c(e),r=t.verb.clone();(r=r.verbs().toFutureTense(),t.verb.replaceWith(r,!1),t.object&&t.object.found&&t.object.has("(#PastTense|#PresentTense)"))&&t.object.verbs().if("(#PastTense|#PresentTense)").verbs().toInfinitive()})),this},subjects:function(){return this.map((function(e){return c(e).subject}))},isPassive:function(){return this.if("was #Adverb? #PastTense #Adverb? by")}},p={phrases:function(){var e=[];return this.forEach((function(t){t=(t=(t=t.splitOn("#VerbPhrase+")).splitOn("#NounPhrase+")).splitOn("#AdjectivePhrase+"),e=e.concat(t.list)})),this.buildFrom(e)}},v=Object.assign({},a,u,h,b,l,p);return function(e,r){r.addTags(o),r.postProcess(s);var a=function(e){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&t(e,r)}(o,e);var r=n(o);function o(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e.map((function(e){return e.clone(!0)})),r.call(this,e,t,n)}return o}(e);return v.questions=v.isQuestion,v.exclamations=v.isExclamation,v.statements=v.isStatement,v._prepend=a.prototype.prepend,v._append=a.prototype.append,v._json=a.prototype.json,Object.assign(a.prototype,v),a.prototype.buildFrom=function(e){return e=e.map((function(e){return e.clone(!0)})),new a(e,this,this.world)},a.prototype.toDoc=function(){return e.prototype.buildFrom(this.list)},e.prototype.sentences=function(e){var t=[];this.list.forEach((function(e){t.push(e.fullSentence())}));var r=new a(t,this,this.world);return"number"==typeof e&&(r=r.get(e)),r},e}}));
